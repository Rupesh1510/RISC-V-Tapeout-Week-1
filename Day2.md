# Day 2: 

## Decoding tt_025C_1v80 in the SKY130 PDK

    tt: Typical process corner.
    025C: Represents a temperature of 25Â°C, relevant for temperature-dependent performance.
    1v80: Indicates a core voltage of 1.8V.

This naming convention clarifies which process, voltage, and temperature conditions the library models.

## Opening and Exploring the .lib File


1. Open the file:

```
gedit sky130_fd_sc_hd__tt_025C_1v80.lib

```

<img width="1920" height="896" alt="Screenshot from 2025-09-27 17-08-06" src="https://github.com/user-attachments/assets/43b566fe-54ec-476f-ad0e-3d824c85d726" />

## Hierarchical vs. Flattened Synthesis

<img width="1920" height="896" alt="Screenshot from 2025-09-27 19-10-06" src="https://github.com/user-attachments/assets/74e994d8-2a97-476b-a46d-257ac700314d" />

<img width="1920" height="896" alt="Screenshot from 2025-09-27 19-10-30" src="https://github.com/user-attachments/assets/87518778-b8d1-46bc-b910-370f7478db00" />

```
/* Generated by Yosys 0.7 (git sha1 61f6811, gcc 6.2.0-11ubuntu1 -O2 -fdebug-prefix-map=/build/yosys-OIL3SR/yosys-0.7=. -fstack-protector-strong -fPIC -Os) */

module multiple_modules(a, b, c, y);
  input a;
  input b;
  input c;
  wire net1;
  output y;
  sub_module1 u1 (
    .a(a),
    .b(b),
    .y(net1)
  );
  sub_module2 u2 (
    .a(net1),
    .b(c),
    .y(y)
  );
endmodule

module sub_module1(a, b, y);
  wire _0_;
  wire _1_;
  wire _2_;
  input a;
  input b;
  output y;
  sky130_fd_sc_hd__and2_2 _3_ (
    .A(_0_),
    .B(_1_),
    .X(_2_)
  );
  assign _0_ = b;
  assign _1_ = a;
  assign y = _2_;
endmodule

module sub_module2(a, b, y);
  wire _0_;
  wire _1_;
  wire _2_;
  wire _3_;
  wire _4_;
  input a;
  input b;
  output y;
  sky130_fd_sc_hd__clkinv_1 _5_ (
    .A(_0_),
    .Y(_3_)
  );
  sky130_fd_sc_hd__clkinv_1 _6_ (
    .A(_1_),
    .Y(_4_)
  );
  sky130_fd_sc_hd__nand2_1 _7_ (
    .A(_3_),
    .B(_4_),
    .Y(_2_)
  );
  assign _0_ = b;
  assign _1_ = a;
  assign y = _2_;
endmodule

```

## Flattened Synthesis

<img width="1920" height="896" alt="Screenshot from 2025-09-27 19-26-18" src="https://github.com/user-attachments/assets/2248d286-e465-44ec-b427-4d199e5c6bd9" />


```
/* Generated by Yosys 0.7 (git sha1 61f6811, gcc 6.2.0-11ubuntu1 -O2 -fdebug-prefix-map=/build/yosys-OIL3SR/yosys-0.7=. -fstack-protector-strong -fPIC -Os) */

module multiple_modules(a, b, c, y);
  wire _00_;
  wire _01_;
  wire _02_;
  wire _03_;
  wire _04_;
  wire _05_;
  wire _06_;
  wire _07_;
  input a;
  input b;
  input c;
  wire net1;
  wire \u1.a ;
  wire \u1.b ;
  wire \u1.y ;
  wire \u2.a ;
  wire \u2.b ;
  wire \u2.y ;
  output y;
  sky130_fd_sc_hd__and2_2 _08_ (
    .A(_00_),
    .B(_01_),
    .X(_02_)
  );
  sky130_fd_sc_hd__clkinv_1 _09_ (
    .A(_03_),
    .Y(_06_)
  );
  sky130_fd_sc_hd__clkinv_1 _10_ (
    .A(_04_),
    .Y(_07_)
  );
  sky130_fd_sc_hd__nand2_1 _11_ (
    .A(_06_),
    .B(_07_),
    .Y(_05_)
  );
  assign \u1.a  = a;
  assign \u1.b  = b;
  assign net1 = \u1.y ;
  assign _00_ = \u1.b ;
  assign _01_ = \u1.a ;
  assign \u1.y  = _02_;
  assign \u2.a  = net1;
  assign \u2.b  = c;
  assign y = \u2.y ;
  assign _03_ = \u2.b ;
  assign _04_ = \u2.a ;
  assign \u2.y  = _05_;
endmodule

```

## Sub-module level synthesys

```
yosys> read_liberty -lib ../my_lib/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
yosys> read_verilog multiple_modules.v
yosys> synth -top sub_module1
yosys> abc -liberty ../my_lib/lib/sky130_fd_sc_hd__tt_025C_1v80.lib
show
```

<img width="1920" height="896" alt="Screenshot from 2025-09-27 19-44-00" src="https://github.com/user-attachments/assets/fa47a674-7098-44d3-ac07-7b1dc1c9e211" />


## Flip-Flop Coding Styles

Asynchronous Reset D Flip-Flop
```
module dff_asyncres (input clk, input async_reset, input d, output reg q);
  always @ (posedge clk, posedge async_reset)
    if (async_reset)
      q <= 1'b0;
    else
      q <= d;
endmodule

```


Asynchronous Set D Flip-Flop

```
module dff_async_set (input clk, input async_set, input d, output reg q);
  always @ (posedge clk, posedge async_set)
    if (async_set)
      q <= 1'b1;
    else
      q <= d;
endmodule
```


Synchronous Reset D Flip-Flop

```
module dff_syncres (input clk, input async_reset, input sync_reset, input d, output reg q);
  always @ (posedge clk)
    if (sync_reset)
      q <= 1'b0;
    else
      q <= d;
endmodule
```

## Simulation and Synthesis Workflow

iverilog Verilog Simulation

Compile:
```
iverilog dff_asyncres.v tb_dff_asyncres.v
```
Run:
```
./a.out
```
View Waveform:
```
gtkwave tb_dff_asyncres.vcd

```

<img width="1908" height="919" alt="image" src="https://github.com/user-attachments/assets/16467ffa-6505-4b53-b893-db12d7e16aba" />

Synthesis with Yosys

Start Yosys:
```
yosys
```
Read Liberty library:
```
read_liberty -lib ../my_lib/lib/sky130_fd_sc_hd__tt_025C_1v80.lib 
```
Read Verilog code:
```
read_verilog dff_asyncres.v 

```
Synthesize:
```
synth -top dff_asyncres
```
Map flip-flops:
```
dfflibmap -liberty ../my_lib/lib/sky130_fd_sc_hd__tt_025C_1v80.lib 
```
Technology mapping:
```
abc -liberty ../my_lib/lib/sky130_fd_sc_hd__tt_025C_1v80.lib 
```
Visualize the gate-level netlist:
```
show
```
<img width="1919" height="922" alt="image" src="https://github.com/user-attachments/assets/6bf0d8e2-1ba0-4b21-907c-8ae17bdf819b" />








